#!/usr/bin/env bash
# 
# Description: Rename ebooks delimited with periods by substituting spaces and removing trailing number sequence
#
###

DELIMITER_FROM='.'
DELIMITER_TO=' '
EXTENSION=(azw3 epub mobi pdf)
PREFIX="LetMeRead.net__"

for EXT in ${EXTENSION[@]}
do
    for FILE in $(ls *.${EXT})
    do
        echo $FILE
        # Remove prefix
        BASE=${FILE#${PREFIX}}
        # Remove number id
        BASE=${BASE%.[0-9]*.${EXT}} 
        # Substitute periods with spaces
        SPACE=$(echo $BASE | tr "$DELIMITER_FROM" "$DELIMITER_TO").$EXT
        echo $SPACE
        mv $FILE "${SPACE}" &&
        echo "Completed!"
    done
done
